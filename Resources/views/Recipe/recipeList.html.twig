{% extends 'IbtikarShareEconomyDashboardDesignBundle:Layout:dashboard.html.twig' %}
{% block header %}
    {{ include('IbtikarGlanceDashboardBundle::header.html.twig') }}
{% endblock %}
{% block navbar %}
    {{ include('IbtikarGlanceDashboardBundle::navbar.html.twig') }}
{% endblock %}
{% block side_menu %}
    {{ include('IbtikarGlanceDashboardBundle::sidebar.html.twig') }}
{% endblock %}
{% block title %}
    {{ ('List Recipe')|trans({}, translationDomain)}}
{% endblock %}
{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" type="text/css" href="{{ asset('bundles/ibtikarglancedashboard/css/jquery.powertip.min.css')}}">
{% endblock %}

{% block body %}
    <div class="content-wrapper">


        <!-- Basic button -->
        <div class="content-group">
            <div class="heading-elemnts">

                <div class="heading-btn-group">
                    {% block breadCrumb %}
                        {% if is_granted('ROLE_RECIPE_CREATE') or is_granted('ROLE_ADMIN') %}
                        <a class="btn btn-link btn-float has-text" href="{{ path('ibtikar_glance_dashboard_recipe_create')}}"><i class="icon-add"></i><span>إدخال وصفه</span></a>
                                {#                        <a class="btn btn-link btn-float has-text activeLink" href="Role-view.php"><i class="icon-table2"></i> <span>مشاهدة الادوار</span></a>
                                #}
                        {% endif %}
                        {% if is_granted('ROLE_BLOG_CREATE') or is_granted('ROLE_ADMIN') %}
                            <a class="btn btn-link btn-float has-text" href="{{ path('ibtikar_glance_dashboard_blog_create')}}"><i class="icon-add"></i><span>إدخال مقال/نصيحة</span></a>
                        {% endif %}
                    {% endblock %}
                    </div>
                </div>
            </div>
            <!-- /basic button -->



            <!-- Dashboard content -->
            <div class="row">
                <div class="col-lg-12">




                    <div class="row">
                        <div class="col-md-12">
                            <!-- view roles -->
                            <div class="panel panel-flat">
                                <div class="panel-heading">
                                    <h5 class="panel-title">{{  ('List content')|trans({}, translationDomain)}}</h5>
                                    <div class="heading-elements">
                                        {% block statistic %}
                                            {# <span class="label heading-text label-flat border-grey text-grey-600">28 closed</span>
                                             <span class="label heading-text label-flat border-success text-success-600">12338 Approved</span>
                                             <span class="label heading-text label-flat border-danger text-danger-600">8973 Rejected</span>
                                             <span class="label heading-text label-flat border-primary text-primary-600">8973 Pending</span>#}
                                        {% endblock %}
                                        <ul class="icons-list">
                                            <li><a data-action="collapse"></a></li>
                                            <li><a data-action="reload"></a></li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="panel-body">
                                    <div class="tabbable">
                                        <ul class="nav nav-tabs nav-tabs-highlight">
                                            {% block tabs %}
                                                {% if is_granted('ROLE_RECIPENEW_VIEW') or is_granted('ROLE_ADMIN')%}
                                                    <li   {% if 'recipenew_list_new' in app.request.attributes.get('_route') %} class="active"    {% endif %}><a data-href="{{ path('ibtikar_glance_dashboard_recipenew_list_new_recipe') }}" data-toggle="tab"><span class="badge badge-primary position-left dev-new-recipe">{{ newRecipeCount}}</span> {% trans from translationDomain %}new{% endtrans%}</a></li>
                                                    {% endif %}
                                                    {% if is_granted('ROLE_RECIPEDELETED_VIEW') or is_granted('ROLE_ADMIN') %}

                                                    <li   {% if 'recipedeleted_list_deleted' in app.request.attributes.get('_route') %} class="active"    {% endif %}><a data-href="{{ path('ibtikar_glance_dashboard_recipedeleted_list_deleted_recipe') }}" data-toggle="tab"><span class="badge badge-primary position-left dev-deleted-recipe">{{ deletedRecipeCount}}</span> {% trans from translationDomain %}deleted{% endtrans%}</a></li>
                                                    {%  endif %}
                                                    {% if is_granted('ROLE_RECIPEPUBLISH_VIEW') or is_granted('ROLE_ADMIN') %}

                                                    <li   {% if 'recipepublish_list_publish' in app.request.attributes.get('_route') %} class="active"    {% endif %}><a data-href="{{ path('ibtikar_glance_dashboard_recipepublish_list_publish_recipe') }}" data-toggle="tab"><span class="badge badge-primary position-left dev-published-recipe">{{ publishRecipeCount }}</span> {% trans from translationDomain %}publish{% endtrans%}</a></li>
                                                    {% endif %}
                                                    {% if is_granted('ROLE_RECIPEAUTOPUBLISH_VIEW') or is_granted('ROLE_ADMIN') %}

                                                    <li   {% if 'recipeautopublish_list_autopublish' in app.request.attributes.get('_route') %} class="active"    {% endif %}><a data-href="{{ path('ibtikar_glance_dashboard_recipeautopublish_list_autopublish_recipe') }}" data-toggle="tab"><span class="badge badge-primary position-left dev-autopublish-recipe">{{ autopublishRecipeCount}}</span> {% trans from translationDomain %}autopublish{% endtrans%}</a></li>
                                                    {% endif %}
                                                    {% if is_granted('ROLE_RECIPENEW_VIEW') or is_granted('ROLE_ADMIN')%}

                                                    <li {% if 'recipenew_list_assigned_' in app.request.attributes.get('_route') %} class="active"    {% endif %}><a data-href="{{ path('ibtikar_glance_dashboard_recipenew_list_assigned_recipe') }}" data-toggle="tab"> <span class="badge badge-primary position-left dev-new-assign-recipe">{{assignedRecipeCount}}</span> {% trans from translationDomain %}recipes assigned to me{% endtrans%} </a></li>
                                                    {% endif %}
                                                {% endblock %}
                                        </ul>

                                        <div class="tab-content">
                                            <div class="tab-pane active" id="open">
                                                <form method="post" action="{{ list.hasBulkActions(listName) ? path(prefixRoute|lower ~ '_bulk_actions') : '' }}" class="dev-bulk-actions-form">
                                                    <input type="hidden" value="" name="type" id="DocumentType"/>
                                                    <input type="hidden" value="" name="reason" id="reason"/>
                                                    <div class="actions">

                                                        {% block actions %}
                                                            <a data-placement="bottom" title="" data-popup="tooltip"  data-toggle="modal"  href="javascript:void(0)" class="btn btn-default btn-sm dev-change-columns" type="button" data-original-title="خانات الجدول"><i class="icon-table2 "></i> <span class="hidden-sm"> </span></a>

                                                            <a id="advanced-search-Btn" data-placement="bottom" title="" data-popup="tooltip"  data-toggle="modal"  href="javascript:void(0)" class="btn btn-default btn-sm" type="button" data-original-title="البحث"><i class="icon-search4"></i> <span class="hidden-sm"> </span></a>

                                                            {% if list.hasBulkActions(listName) %}
                                                                <input type="hidden" id="dev-bulk-action" name="bulk-action" value=""/>
                                                                <span class="dev-bulk-action-container" data-list-name="{{listName|lower}}" data-href="{{ list.hasBulkActions(listName) ? path(prefixRoute|lower ~ '_bulk_actions') : '' }}" style="display: none;">
                                                                    {% for action in list.bulkActions %}
                                                                        {% if action == "Delete"  and (is_granted('ROLE_'~listName|upper~'_DELETE') or is_granted('ROLE_ADMIN')) %}
                                                                            <a data-action="{{action}}"  class="btn btn-default btn-sm dev-delete-bulk-recipe" data-placement="bottom"> <i class="icon-trash"></i> <span class="hidden-sm position-right">{{ 'delete'|trans }}</span></a>
                                                                        {% endif %}
                                                                    {% endfor %}
                                                                </span>
                                                            {% endif %}


                                                        {% endblock %}
                {% block searchList %}
                    <div class='advanced-search {% if not search %}searchhidden{% endif %}'>

                        <form id="search-form">
                                        <div class="row">
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label>{{ 'Title'|trans({}, translationDomain) }}</label>
                                                    <input type="text" name="form-title" placeholder="بحث" class="form-control input-sm show dev-form-title" value="{{app.request.get('title')}}">
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label>{{ 'Chef'|trans({}, translationDomain) }}</label>
                                                    <select class="select dev-form-chef" name="recipe[chef]">
                                                        <option value="">اختار الشيف</option>
                                                        {% for key,value in chefs %}
                                                            <option value="{{ value.id }}" {% if chef_selected == value.id and search %} selected {% endif %}>{{ value }}</option>
                                                        {% endfor%}
                                                   </select>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label>{{ 'Created From'|trans({}, translationDomain) }}</label>
                                                    <div>
                                                        <div class='input-group date datepicker'>
                                                            <input type='text' class="form-control dev-form-created open-datetimepicker"  value="{{app.request.get('from')}}"/>
                                                            <span class="input-group-addon">
                                                                <span class="glyphicon glyphicon-calendar"></span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label>{{ 'Created To'|trans({}, translationDomain) }}</label>
                                                    <div>
                                                        <div class='input-group date datepicker'>
                                                            <input type='text' class="form-control dev-to-created open-datetimepicker" value="{{app.request.get('to')}}" />
                                                            <span class="input-group-addon">
                                                                <span class="glyphicon glyphicon-calendar"></span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div><!-- row end -->
                                            <div class="row">
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    {% set selected_tags = app.request.get('tags')|split(',') %}
                                                    <label>{{ 'Tags'|trans({}, translationDomain) }}</label>
                                                    <select type="text" name="form-tags" placeholder="بحث" class="select form-control input-sm show dev-form-tags" multiple="" value="{{app.request.get('tags')}}">
                                                        <option value="">كلمات مفتاحية</option>
                                                        {% for key,value in tags %}
                                                            <option value="{{ value.id }}" {% if  search and value.id in selected_tags %} selected {% endif %}>{{ value }}</option>
                                                        {% endfor%}
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label>{{ 'Meal'|trans({}, translationDomain) }}</label>
                                                    <select multiple="" class="select dev-form-meal" name="recipe[meals]">
                                                        {% for key,value in meals %}
                                                            <option value="{{ value }}" {% if meals_selected == value and search %} selected {% endif %}>{{ value|trans({}, translationDomain) }}</option>
                                                        {% endfor%}
                                                   </select>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label>{{ 'Ingredients'|trans({}, translationDomain) }}</label>
                                                    <select multiple="" class="select dev-form-ingredient" name="recipe[Ingredients]">
                                                        {% for key,value in ingredients %}
                                                            <option value="{{ value }}" {% if ingredients_selected == value and search %} selected {% endif %}>{{ value|trans({}, translationDomain) }}</option>
                                                        {% endfor%}
                                                   </select>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label>{{ 'Products'|trans({}, translationDomain) }}</label>
                                                    <select multiple="" class="select dev-form-product" name="recipe[products]">
                                                        {% for key,value in products %}
                                                            <option value="{{ value.id }}" {% if products_selected == value.id and search %} selected {% endif %}>{{ value }}</option>
                                                        {% endfor%}
                                                    </select>
                                                </div>
                                            </div>
                                        </div><!-- row end -->

        {% if 'recipepublish_list_publish' in app.request.attributes.get('_route') %}
                                        <div class="row">
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label>{{ 'Published From'|trans({}, translationDomain) }}</label>
                                                    <div>
                                                        <div class='input-group date datepicker'>
                                                            <input type='text' class="form-control dev-form-published open-datetimepicker"  value="{{app.request.get('pub-from')}}"/>
                                                            <span class="input-group-addon">
                                                                <span class="glyphicon glyphicon-calendar"></span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label>{{ 'Published To'|trans({}, translationDomain) }}</label>
                                                    <div>
                                                        <div class='input-group date datepicker'>
                                                            <input type='text' class="form-control dev-to-published open-datetimepicker" value="{{app.request.get('pub-to')}}" />
                                                            <span class="input-group-addon">
                                                                <span class="glyphicon glyphicon-calendar"></span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div><!-- row end -->
        {% endif %}
                                        <div class="row">
                                            <div class="col-xs-12">


                                                <button class="btn btn-primary btn-lg dev-search-submit" type="button" style="margin-left: 5px">بحث</button>
                                                <button class="btn btn-default btn-lg dev-search-clear" type="button">إلغاء</button>
                                            </div>
                                        </div>
                                    </div>

                {% endblock %}
    </form>                                        </div>

                                            <div style="margin-top: 15px;">
                                                <div class="col-md-12">
                                                    {% for flashMessageType, flashMessageArray in app.session.flashBag.all %}
                                                        {% for flashMessage in flashMessageArray %}
                                                            <div class="alert {{ flashMessageType == 'error' ? 'alert-danger' : flashMessageType == 'success' ? 'alert-success' : 'alert-info' }} no-border">
                                                                <button data-dismiss="alert" class="close" type="button"><span>×</span><span class="sr-only">{% trans %}Close{% endtrans %}</span></button>{{ flashMessage }}
                                                            </div>
                                                        {% endfor %}
                                                    {% endfor %}

                                                </div>
                                            </div>


                                            <table class="table table-hover table-striped datatable-column-search-inputs" width="100%">
                                                <thead>

                                                    <tr>
                                                        {% if list.hasBulkActions(listName) %}
                                                            <th class="" data-orderable="false" data-bSortable="false" data-searchable="false" data-name="id">
                                                    <div class="form-group">
                                                        <label class="checkbox-inline">
                                                            <input type="checkbox" class="styled dev-checkbox dev-checkbox-all">
                                                        </label>
                                                    </div>
                                                    </th>
                                                {% endif %}
                                                {% for field in list.fields %}
                                                    <th class="" data-name="{{ field.title }}">
                                                        {{ field.title|trans({}, translationDomain) }}

                                                    </th>
                                                {% endfor %}

                                                {% if list.hasActionsColumn(listName) %}

                                                    <th  class="">العمليات</th>
                                                    {%endif %}
                                                </tr>


                                                </thead>
                                                <tbody>
                                                    {% set deleteAttrs = popover_factory(deletePopoverConfig is defined?deletePopoverConfig:[]) %}
                                                    {% set conditionalDeleteAttrs = popover_factory(conditionalDeletePopoverConfig is defined?conditionalDeletePopoverConfig:[]) %}

                                                    {% for object in pagination %}
                                                        <tr>
                                                            {% if list.hasBulkActions(listName) %}

                                                                <td class="" data-id="{{ object.id }}">
                                                                    <div class="form-group">
                                                                        <label class="checkbox-inline">
                                                                            <input type="checkbox" name="ids[]" class="styled dev-checkbox" value="{{object.id}}" data-type="{{ object.type}}" >
                                                                        </label>
                                                                    </div>


                                                                </td>
                                                            {% endif %}
                                                            {% for field in list.fields %}
                                                                {% if field.type == "date" %}
                                                                    <td class="{{field.class}}" {% if field.isClickable %} style="cursor:pointer" onclick="window.location = '{{field.isClickable|replace({'--id--':object.document.id})}}'" {% endif %}>

                                                                        {{ attribute(object, field.propertyName) is empty ? "" : attribute(object, field.propertyName)|date('Y-m-d') }}
                                                                    </td>
                                                                {% elseif field.type == "many"  %}
                                                                    <td>
                                                                        {% for element in attribute(object, field.propertyName|humanize|title|replace({' ':''})) %}
                                                                            {% if not loop.first %},{% endif %}
                                                                            {{ element|trans({},translationDomain) }}
                                                                        {% endfor %}
                                                                    </td>
                                                                {% elseif field.type == "refereceImage"  %}
                                                                    <td>
                                                                        <div class="media-left media-middle">
                                                                            <a href="javascript:void(0)"><img src="{{ asset( attribute(attribute(object, field.propertyName), 'webPath')|default('bundles/ibtikarshareeconomydashboarddesign/images/placeholder.jpg')) }}" class="img-lg" alt=""></a>
                                                                        </div>
                                                                    </td>
                                                                {% elseif field.propertyName == "username"  %}
                                                                    <td>
                                                                        <div class="media-left media-middle">
                                                                            <a href="javascript:void(0)"><img src="{{ asset( attribute(object, 'webPath')|default('bundles/ibtikarshareeconomydashboarddesign/images/profile.jpg')) }}" class="img-circle img-lg" alt=""></a>
                                                                        </div>
                                                                        <div class="media-body">
                                                                            <a href="javascript:void(0);" class="display-inline-block text-default text-semibold letter-icon-title">   {{ attribute(object, field.propertyName|humanize|title|replace({' ':''}))}} </a>
                                                                        </div>

                                                                    </td>
                                                                {% else %}
                                                                    <td >
                                                                        {% if field.isClickable %}
                                                                            <a href="javascript:void(0)" class="{{field.class}}" data-id="{{object.id}}">
                                                                                {{ attribute(object, field.propertyName|humanize|title|replace({' ':''}))}}
                                                                            </a>
                                                                        {%else%}
                                                                            {# added to fix the sorting for fields with underscore #}

                                                                            {{ attribute(object, field.propertyName|humanize|title|replace({' ':''}))}}


                                                                        {% endif %}

                                                                    </td>
                                                                {% endif %}


                                                            {% endfor %}

                                                            {% if list.hasActionsColumn(listName) %}
                                                                <td  style="white-space: nowrap;">
                                                                    {% if  object.getNotModified() is not defined  or  object.getNotModified()== false %}
                                                                        {% for action in list.actions %}
                                                                            {% if action == "Edit" %}
                                                                                {% if is_granted('ROLE_' ~ listName|upper ~'_EDIT') or is_granted('ROLE_ADMIN') %}

                                                                                    <a class="btn btn-default"  href = "{{ path(prefixRoute|lower ~ '_edit', {'id': object.id}) }}"  ><i class="icon-pencil" data-popup="tooltip"  data-placement="right" title="{{ ('Edit ' ~  listName)|trans({},translationDomain)}}"></i></a>
                                                                                    {% endif %}
                                                                                {% elseif action == "Delete" %}
                                                                                    {% if  (is_granted('ROLE_RECIPE' ~ object.status|upper ~'_DELETE') or is_granted('ROLE_ADMIN')) %}
                                                                                    <a class="btn btn-default dev-delete-single-recipe"  data-href = "{{ path(prefixRoute|lower ~ '_delete', {'id': object.id}) }}" data-id="{{ object.id }}" ><i class="icon-trash" data-popup="tooltip" title="{{ ('Delete ' ~  listName)|trans({},translationDomain)}}" data-placement="right"  ></i></a>
                                                                                {% endif %}
                                                                                {% elseif action == "ViewOne" %}

                                                                                {% if is_granted('ROLE_' ~ listName|upper ~'_VIEWONE') or is_granted('ROLE_ADMIN')  %}

                                                                                    <a href="{{ path(prefixRoute|lower~'_view', {'id': object.id}) }}" class="btn btn-default">
                                                                                        <i class="icon-eye" data-popup="tooltip"  data-placement="right" title="{{('View One ' ~  listName|capitalize)|trans({},translationDomain)}}" ></i>
                                                                                    </a>
                                                                                {% endif %}

                                                                            {% elseif action == "Assign" %}
                                                                                {% if is_granted('ROLE_' ~ listName|upper ~'_ASSIGN') or is_granted('ROLE_ADMIN')%}
                                                                                    <a href="javascript:void(0);"   class="btn btn-default dev-assign-to-me"   data-id="{{ object.getId() }}" data-url="{{ path(prefixRoute|lower ~'_assign_to_me')}}"  >
                                                                                        <i class="icon-user" data-popup="tooltip"  data-placement="right" title="{% trans from translationDomain %}AssignToMe{% endtrans %}"  ></i>
                                                                                    </a>
                                                                                {% endif %}


                                                                            {% elseif action == "Publish" %}


                                                                                {% if is_granted('ROLE_' ~ listName|upper ~'_PUBLISH') or is_granted('ROLE_ADMIN')%}
                                                                                        <a href="javascript:void(0)" data-toggle="modal"  class="btn btn-default dev-publish-recipe" data-id="{{ object.getId() }}"><i class="icon-share" data-placement="right"  data-popup="tooltip" title="{{('publish ' ~  listName|capitalize)|trans({},translationDomain)}}"></i></a>
                                                                                {% endif %}
                              {#                                              {% elseif action == "AutoPublish" %}

                                                                                {% if is_granted('ROLE_' ~ listName|upper ~'_AUTOPUBLISH') or is_granted('ROLE_ADMIN')  %}
                                                                                    {% if  'publish' not in object.getStatus() %}
                                                                                        <button data-name="{{ object }}" data-id="{{ object.getId() }}" data-action="autopublish"
                                                                                                class="btn btn-default" data-popup="tooltip"  data-placement="bottom"  {% if object.getStatus() is defined %}data-status="{{object.getStatus()}}"{%endif%} title="{{('autopublish ' ~  listName|capitalize)|trans({},translationDomain)}}">
                                                                                            <i class="icon-checkmark3"></i>
                                                                                        </button>
                                                                                    {% endif %}
                                                                                {% endif %}#}
                                                                            {% endif %}


                                                                        {% endfor %}
                                                                    {% endif  %}
                                                                </td>
                                                            {% endif  %}

                                                        </tr>


                                                    {% endfor %}




                                                </tbody>


                                            </table>
                                                       </form>

                                        </div><!-- tab 1 -->

                                        <div class="tab-pane" id="close">









                                        </div><!-- tab 2 -->


                                        <div class="tab-pane" id="edit">







                                        </div><!-- tab 3 -->



                                        <div class="tab-pane" id="delete">








                                        </div><!-- tab 4 -->



                                    </div>
                                </div>
                            </div>

                        </div>
                        <!-- /scrollable datatable -->



                    </div>

                </div>



            </div><!-- col-lg-9 tabs -->


        </div>
        <!-- /dashboard content -->

    </div>

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        var loginUrl = "{{ path('ibtikar_glance_ums_staff_login')}}";
        var notFoundUrl = "{{ path('ibtikar_glance_dashboard_not_found')}}";
        var accessDeniedUrl = '{{ path('access_denied') }}';

        var publishErrorMessage= "{% trans from translationDomain%}you must change time{% endtrans %}"
        var deleteErrorMessage= "{% trans from translationDomain%}you must write delete reason{% endtrans %}"

        var columns ={{ columns|raw}} ;
                var totalNumber = "{{total}}";
                var limit ={{limit}} ;
                var start ={{skip}} ;
                var sort ={% if sort is defined %}{{sort|raw}}{% else %} null{%endif %};
        var toggleButtonColor = '#D6494C';
        {% if 'recipedeleted_list_deleted' in app.request.attributes.get('_route') %}
            var ajaxData = '{{ path(prefixRoute|lower~'_list_deleted_recipe') }}';
            var changeListColumnsUrl = "{{path(prefixRoute|lower~changeListColumnType~'_change_list_columns')}}";
        {% endif %}
        {% if 'recipenew_list_new' in app.request.attributes.get('_route') %}
            var ajaxData = '{{ path(prefixRoute|lower~'_list_new_recipe') }}';
            var changeListColumnsUrl = "{{path(prefixRoute|lower~changeListColumnType~'_change_list_columns')}}";
        {% endif %}

        {% if 'recipepublish_list_publish' in app.request.attributes.get('_route') %}
            var ajaxData = '{{ path(prefixRoute|lower~'_list_publish_recipe') }}';
            var changeListColumnsUrl = "{{path(prefixRoute|lower~changeListColumnType~'_change_list_columns')}}";
        {% endif %}
        {% if 'recipeautopublish_list_autopublish' in app.request.attributes.get('_route') %}
            var ajaxData = '{{ path(prefixRoute|lower~'_list_autopublish_recipe') }}';
            var changeListColumnsUrl = "{{path(prefixRoute|lower~changeListColumnType~'_change_list_columns')}}";
        {% endif %}

        {% if '_recipenew_list_assigned_recipe' in app.request.attributes.get('_route') %}
            var ajaxData = '{{ path('ibtikar_glance_dashboard_recipenew_list_assigned_recipe') }}';
            var changeListColumnsUrl = "{{path('ibtikar_glance_dashboard_recipenew_list_assigned_recipe_change_list_columns')}}";
        {% endif %}
        {% if 'recipenew_list_new' not in app.request.attributes.get('_route') %}
        var publisUrl="{{ path(prefixRoute|lower~'_publish')}}";
        {% endif %}
        {% if 'recipedeleted_list_deleted' not in app.request.attributes.get('_route') %}
          var deleteUrl=" {{ path(prefixRoute|lower ~'_delete')}}";
        {% endif %}

    </script>
    <script type="text/javascript" src="{{ asset('bundles/ibtikarshareeconomydashboarddesign/js/pages/layout_sidebar_sticky_custom.js')}}"></script>
    <script type="text/javascript" src="{{ asset('bundles/ibtikarshareeconomydashboarddesign/js/plugins/forms/styling/uniform.min.js')}}"></script>
    <script type="text/javascript" src="{{ asset('bundles/ibtikarshareeconomydashboarddesign/js/plugins/forms/styling/switchery.min.js')}}"></script>
    <script type="text/javascript" src="{{ asset('bundles/ibtikarshareeconomydashboarddesign/js/plugins/forms/styling/switch.min.js')}}"></script>
    <script type="text/javascript" src="{{ asset('bundles/ibtikarshareeconomydashboarddesign/js/pages/form_checkboxes_radios.js')}}"></script>
    <!-- datatable files -->
    <script type="text/javascript" src="{{ asset('bundles/ibtikarshareeconomydashboarddesign/js/plugins/tables/datatables/datatables.min.js')}}"></script>
    <script type="text/javascript" src="{{ asset('bundles/ibtikarshareeconomydashboarddesign/js/plugins/forms/selects/select2.min.js')}}"></script>
    <script type="text/javascript" src="{{ asset('bundles/ibtikarshareeconomydashboarddesign/js/pages/datatables_api.js')}}"></script>
    <script src="{{ asset('bundles/ibtikarglancedashboard/js/jquery.powertip.min.js') }}"></script>
    <script src="{{ asset('bundles/ibtikarglancedashboard/js/ajaxifyList.js') }}"></script>
    <script src="{{ asset('bundles/ibtikarglancedashboard/js/recipeActions.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/ibtikarshareeconomydashboarddesign/js/pages/components_modals.js')}}"></script>

    <script type="text/javascript" src="{{ asset('bundles/ibtikarshareeconomydashboarddesign/js/plugins/ui/dragula.min.js')}}"></script>
    <script type="text/javascript" src="{{ asset('bundles/ibtikarshareeconomydashboarddesign/js/pages/extension_dnd.js')}}"></script>

    <script>
        intializeTable();
        var list = new BaseList();
$('document').ready(function(){


    $(function() {
        $('.datepicker').datetimepicker({
            format: 'D/M/YYYY',
            showClear:true
        });
    });


    $('.open-datetimepicker').click(function(event) {
        event.preventDefault();
        $(this).next().click();
    });


    $('document').on('click','#advanced-search-Btn', function () {
        if ($(".advanced-search").hasClass("searchhidden")) {
            $(".advanced-search").slideDown();
            $(".advanced-search").removeClass('searchhidden');
        } else {
            $(".advanced-search").slideUp();
            $(".advanced-search").addClass('searchhidden');
            $(".advanced-search-more").slideUp();
        }

    });

    $(document).on('click', '.dev-search-submit', function () {
        parameterNotRemoved = "";
    var url = window.location.pathname;
    var qs = "";
    var queryStringFlag = false;

    var title = $('.dev-form-title').val();
    if (title !== '') {
        qs += (queryStringFlag) ? "&" : "";
        qs += 'title=' + title;
        url += qs;
        queryStringFlag = true;
    }

    var chef = $('.dev-form-chef').val();
    if (chef !== '') {
        qs += (queryStringFlag) ? "&" : "";
        qs += 'chef=' + chef;
        url += qs;
        queryStringFlag = true;
    }

    var createdFrom = $('.dev-form-created').val();
    if (createdFrom !== '') {
        qs += (queryStringFlag) ? "&" : "";
        qs += 'from=' + createdFrom;
        url += qs;
        queryStringFlag = true;
    }

    var createdTo = $('.dev-to-created').val();
    if (createdTo !== '') {
        qs += (queryStringFlag) ? "&" : "";
        qs += 'to=' + createdTo;
        url += qs;
        queryStringFlag = true;
    }

    var tags = $('.dev-form-tags').val();
    if (tags) {
        qs += (queryStringFlag) ? "&" : "";
        qs += 'tags=' + tags.join(',');
        url += qs;
        queryStringFlag = true;
    }

    var meals = $('.dev-form-meal').val();
    if (meals) {
        qs += (queryStringFlag) ? "&" : "";
        qs += 'meals=' + meals.join(',');
        url += qs;
        queryStringFlag = true;
    }

    var ingredients = $('.dev-form-ingredient').val();
    if (ingredients) {
        qs += (queryStringFlag) ? "&" : "";
        qs += 'ingredients=' + ingredients.join(',');
        url += qs;
        queryStringFlag = true;
    }

    var products = $('.dev-form-product').val();
    if (products) {
        qs += (queryStringFlag) ? "&" : "";
        qs += 'products=' + products.join(',');
        url += qs;
        queryStringFlag = true;
    }

    var publishedFrom = $('.dev-form-published').val();
    if (publishedFrom !== '') {
        qs += (queryStringFlag) ? "&" : "";
        qs += 'pub-from=' + publishedFrom;
        url += qs;
        queryStringFlag = true;
    }

    var publishedTo = $('.dev-to-published').val();
    if (publishedTo !== '') {
        qs += (queryStringFlag) ? "&" : "";
        qs += 'pub-to=' + publishedTo;
        url += qs;
        queryStringFlag = true;
    }

    parameterNotRemoved = qs;
    if(queryStringFlag){
        parameterNotRemoved+="&search=true"
    }
        table.ajax.reload(function () {
//            showBulkActionSelect();
        });
});

$(document).on('click', '.dev-search-clear', function () {
        parameterNotRemoved = "";
        $("#advanced-search-Btn").click();
        $('.advanced-search input').val('');
        $('.advanced-search select').val(null).trigger("change");

        table.ajax.reload(function () {
//            showBulkActionSelect();
        }, false);
});


});
    </script>


{% endblock %}
