{% extends 'IbtikarGlanceDashboardBundle::form_theme_recipe.html.twig' %}

{% block choice_widget_options -%}
    {% for group_label, choice in options %}
        {%- if choice is iterable -%}
            <optgroup label="{{ group_label|trans({}, translation_domain) }}">
                {% set options = choice %}
                {{- block('choice_widget_options') -}}
            </optgroup>
        {%- else -%}
            <option value="{{ choice.value }}"{% if choice is selectedchoice(value) %} selected="selected"{% endif %}>{{ choice.label|trans({}, translation_domain) }}</option>
        {%- endif -%}
    {% endfor %}
{%- endblock choice_widget_options %}

{%- block form_widget_compound -%}
    <div {{ block('widget_container_attributes') }}>
        {%- if form.parent is empty -%}
            {{ form_errors(form) }}
        {% elseif prototype is defined %}
            {# poll answers add button render #}
            <div class="dev-add-question-answer-container">
            </div>
        {% endif %}
{#        {{dump(form.vars)}}#}
{#        {% if form.vars.id == 'competition_questions' %}<hr/>{% endif %}#}
        {% if form.vars.unique_block_prefix == '_competition_questions_entry' %}
            <a class="btn btn-primary DeleteBTN pull-left deleteQuestion dev-remove-competition-question hide" style="position:relative;z-index:1;">
                <i class="fa fa-times"></i>
            </a>
        {% endif %}

        {{- block('form_rows') -}}
        {{- form_rest(form) -}}
    </div>
{%- endblock form_widget_compound -%}

{% block form_row %}
    {% set allowLabelElm = ['_competition_questions_entry_answers','_competition_questions_entry_answerDisplay','_competition_questions_entry_answerImportance','_competition_questions_entry_resultDisplay'] %}
    {% if form.parent.parent.parent is defined %}
        {% if form.vars.name == "question" %}<hr/>{% endif %}
        {% if form.children | length == 0 or form.vars.unique_block_prefix in allowLabelElm %}
        <div class="form-group{% if "answer" == form.vars.name %} inputBody noMargin dev-poll-answer-container{% endif %}{% if form.vars.errors|length > 0 %} has-error{% endif %}{% if form.vars.unique_block_prefix in ['_competition_questions_entry_answers','_competition_questions_entry_answerDisplay'] %} dependant-fields{% endif %}" {% if "answer" == form.vars.name %}style="margin-left:-15px !important;"{% endif %}>
            {% if "_answer" not in form.vars.id or form.vars.unique_block_prefix in allowLabelElm %}
                {{ form_label(form)  }}
            <div class="col-md-6">
                {{ form_widget(form) }}
                {{ form_errors(form) }}
            </div>
            {% else %}
                <span class="deleteAnswer dev-remove-poll-answer">
                <i class="fa fa-times"></i>
                </span>
                <span class="sameRadio"></span>
                {{ form_widget(form) }}
                {{ form_errors(form) }}
            {% endif %}

        </div>
        {% else %}
            {{ form_widget(form) }}
        {% endif %}
    {% else %}
{% if form.vars.id == 'poll_questions' %}<hr/>{% endif %}
        <div class="form-group{% if form.vars.name == "sponsors"%} inputBody noMargin dev-event-sponsor-container{% endif %}{% if attr['data-form-group-class'] is defined %} {{ attr['data-form-group-class'] }}{% endif %}{% if form.vars.errors|length > 0 or (form.phone is defined and form.phone.vars.errors|length > 0) %} has-error{% endif %}{%  if "_media" in form.vars.id %} hide{% endif %}">
            {% if form.vars.name != "sponsors" %}
                {{ form_label(form)  }}
                <div class="{% if form.vars.type is defined and form.vars.type == 'datetime' %}{% else %}col-md-{{form.vars.compound and form.vars.name not in ["resultsVisibility","allowedToVote"]?"12":"6"}}{% endif %}">
{#                    {{dump(form.vars)}}#}
                    {{ form_widget(form) }}
                    {{ form_errors(form) }}
                </div>
            {% else %}
                {{ form_widget(form) }}
                {{ form_errors(form) }}
            {% endif %}
        </div>
    {% endif %}
{% endblock form_row %}